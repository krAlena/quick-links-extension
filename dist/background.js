chrome.runtime.onMessage.addListener(((r,e,t)=>{if("injectScript"===r.action)return chrome.scripting.executeScript({target:{tabId:r.tabId},files:["contentScript.js"]},(()=>{console.log("Content script injected via message"),t({status:"injected"})})),!0;if("getRecentBookmarks"===r.action)return chrome.bookmarks.getRecent(20,(r=>{chrome.runtime.lastError?t({error:chrome.runtime.lastError.message}):t({bookmarks:r})})),!0;if("searchByBookmarks"===r.action)return chrome.bookmarks.search(r.strSearch,(function(r){t({bookmarks:r})})),!0;if("getHistoryLinks"===r.action){let e={text:r.strSearch,startTime:0,maxResults:20};return chrome.history.search(e,(function(r){chrome.runtime.lastError?t({error:chrome.runtime.lastError.message}):t({links:r})})),!0}}));