chrome.runtime.onMessage.addListener(((e,r,t)=>{if("getRecentBookmarks"===e.action)return chrome.bookmarks.getRecent(20,(e=>{chrome.runtime.lastError?t({error:chrome.runtime.lastError.message}):t({bookmarks:e})})),!0;if("searchByBookmarks"===e.action){let r="";return"object"==typeof e&&void 0!==e.strSearch&&(r=e.strSearch),chrome.bookmarks.search(r,(function(e){t({bookmarks:e})})),!0}if("getHistoryLinks"===e.action){let r="";"object"==typeof e&&void 0!==e.strSearch&&(r=e.strSearch);let o={text:r,startTime:0,maxResults:20};return chrome.history.search(o,(function(e){chrome.runtime.lastError?t({error:chrome.runtime.lastError.message}):t({links:e})})),!0}return"deleteBookmark"===e.action?("object"==typeof e&&void 0!==e.id&&chrome.bookmarks.remove(e.id,(function(e){t(!0)})),!0):"deleteHistoryLink"===e.action?("object"==typeof e&&void 0!==e.lastVisitTime&&chrome.history.deleteRange({startTime:e.lastVisitTime,endTime:e.lastVisitTime+1},(function(e){t(!0)})),!0):void 0}));